<template name="importProjectCSV">
    <div class="container mt-4">
        <h2 class="text-2xl font-bold mb-4 d-flex align-items-center">
        <i class="fas fa-file-upload mr-2 text-blue-500"></i>
        {{t 'importCSV.title'}}
        </h2>
        {{#unless isUploaded}}
        <div class="space-y-4">
            <div class="form-group">
            <label for="file-input" class="btn btn-outline-primary">
                <i class="fas fa-upload mr-2"></i>
                {{t 'importCSV.chooseFile'}}
            </label>
            <input type="file" accept=".csv" id="file-input" class="d-none" />
            {{#if file}}
                <div class="d-flex align-items-center mt-2">
                <i class="fas fa-file text-green-500 mr-2"></i>
                <span class="text-sm font-medium">{{file.name}}</span>
                <button type="button" class="btn btn-link text-danger ml-2 p-0" id="remove-file-button" title="{{t 'importCSV.removeFile.title'}}">
                    <i class="fas fa-times"></i>
                </button>
                </div>
            {{/if}}
            </div>
            
            <button id="parse-csv-button" class="btn {{#if file}}btn-primary{{else}}btn-secondary disabled{{/if}}">
            {{#if loading}}
                <i class="fas fa-spinner fa-spin mr-2"></i>
                {{t 'importCSV.parsing'}}
            {{else}}
                {{t 'importCSV.parseCSV'}}
            {{/if}}
            </button>
            
            {{#if csvData}}
            <div class="space-y-4">
                <h3 class="text-lg font-semibold d-flex align-items-center">
                <i class="fas fa-table mr-2 text-muted"></i>
                {{t 'importCSV.previewData'}}
                </h3>
                <div id="data-table-container" class="table-responsive">
                </div>
                <div class="d-flex justify-content-end">
                <button id="import-data-button" class="btn btn-success">
                    {{#if loading}}
                    <i class="fas fa-spinner fa-spin mr-2"></i>
                    {{t 'importCSV.importing'}}
                    {{else}}
                    {{t 'importCSV.importData'}}
                    {{/if}}
                </button>
                </div>
                <pre class="bg-light p-3 rounded overflow-auto text-sm">{{jsonCsvData}}</pre>
            </div>
            {{/if}}
        
        </div>
        {{/unless}}
        {{#if isUploaded}}
        <div class="alert alert-success d-flex align-items-center" role="alert">
            <i class="fas fa-check-circle mr-2"></i>
            <div>
            <strong class="font-bold">{{t 'importCSV.success'}}</strong>
            <span class="block">{{t 'importCSV.successMessage'}}</span>
            </div>
        </div>
        {{/if}}

        {{#if error}}
        <div class="alert alert-danger d-flex align-items-center" role="alert">
            <i class="fas fa-exclamation-triangle mr-2"></i>
            <div>
            <strong class="font-bold">{{t 'importCSV.error'}}</strong>
            <span class="block">{{error}}</span>
            </div>
        </div>
        {{/if}}
    </div>
</template>